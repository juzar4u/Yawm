@model List<AkhbaarAlYawm.DataAccess.Custom.Entities.ClassifiedIndexModel>
<script src="~/Content/js/jwplayer.js"></script>
<script>jwplayer.key = "XqJa9FXleBOTwBWKKMUWovUfCdkGpk7c7TLYsw==";</script>
<link href="~/FeaturedPanel/dist/css/swiper.min.css" rel="stylesheet" />
<style>
    .swiper-container {
        border: 15px #e9e3e3 solid;
        /* margin: 5px; */
        background: #fff;
        
    }
    .postnow {
        width:100%;
    }
    .comment {
        margin: 0;
    }

        .comment li {
            display: block;
            padding: 8px;
            border-bottom: 1px solid #CCC;
            background: url("../design/gradient.png") 0 100% repeat-x;
        }

            .comment li .comment-img {
                float: left;
                width: 88px;
            }

                .comment li .comment-img img {
                    display: block;
                    width: 70px;
                    height: 70px;
                    margin-left: 8px;
                    border-radius: 50%;
                }

            .comment li .comment-txt {
            }

            /*.comment li .post-txt {
                margin-left: 170px;
            }*/

            .comment li .comment-txt p {
                margin: 0;
                font-size: 14px;
            }

            .comment li .post-txt a {
                margin: 10px;
                color: blue;
            }

        

    #bodymain h1 {
        padding: 0px 7px;
    }

    #bodymain a {
        font-size: 21px;
    }
     .postBtn {
	-moz-box-shadow:inset 0px 1px 0px 0px #caefab;
	-webkit-box-shadow:inset 0px 1px 0px 0px #caefab;
	box-shadow:inset 0px 1px 0px 0px #caefab;
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #77d42a), color-stop(1, #5cb811));
	background:-moz-linear-gradient(top, #77d42a 5%, #5cb811 100%);
	background:-webkit-linear-gradient(top, #77d42a 5%, #5cb811 100%);
	background:-o-linear-gradient(top, #77d42a 5%, #5cb811 100%);
	background:-ms-linear-gradient(top, #77d42a 5%, #5cb811 100%);
	background:linear-gradient(to bottom, #77d42a 5%, #5cb811 100%);
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#77d42a', endColorstr='#5cb811',GradientType=0);
	background-color:#77d42a;
	-moz-border-radius:6px;
	-webkit-border-radius:6px;
	border-radius:6px;
	border:1px solid #268a16;
	display:inline-block;
	cursor:pointer;
	color:#306108;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #aade7c;
    width: 100%;
    margin-bottom: 25px;
}
.postBtn:hover {
	background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #5cb811), color-stop(1, #77d42a));
	background:-moz-linear-gradient(top, #5cb811 5%, #77d42a 100%);
	background:-webkit-linear-gradient(top, #5cb811 5%, #77d42a 100%);
	background:-o-linear-gradient(top, #5cb811 5%, #77d42a 100%);
	background:-ms-linear-gradient(top, #5cb811 5%, #77d42a 100%);
	background:linear-gradient(to bottom, #5cb811 5%, #77d42a 100%);
	filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#5cb811', endColorstr='#77d42a',GradientType=0);
	background-color:#5cb811;
}
.postBtn:active {
	position:relative;
	top:1px;
}
    .drpcls {
        border-radius: 3px;
        height: 58px;
        display: block;
        clear: both;
        border: 0;
        background-color: #fff;
        font-size: 18px;
        margin: 0 0 22px;
        padding: 0 15px;
        width: 100%;
    }

    
</style>
<div id="content">
    
    
    <h2 class="separator" >Classifieds</h2>
    <button type="button" class="postnow btn btn-success" value="Post Ad" id="fixedbutton"><i class="fa fa-upload fa-lg" aria-hidden="true" style="padding:5px; color:#000;"></i>Post Ad</button>
    <!-- TOPSTORY -->

    @foreach(var item in Model)
    {
        
    <div class="swiper-container">
        
        <ul class="comment box">
            
            <li class="box" id="">
                <div class="comment-img">
                    <a>
                        <img src="@string.Format("{0}{1}", AkhbaarAlYawm.Application.Helper.ApplicationConstants.Akhbaar_PP_URL, item.UserProfileImg)" alt="" /></a>
                </div>
                <div class="comment-txt" style="text-align: justify; margin: 10px; padding: 5px;">
                    <h3 style="font-weight: bold; margin: 0;">@string.Format("{0}{1}{2}", item.FirstName, " ", item.LastName)</h3>
                </div>

                <!-- /comment-txt -->
            </li>
        </ul>
        <h3 class="separator" id="BG" style="font-family:Calibri; font-size:14px;">Category: @item.ClassifiedCategoryName</h3>
        
        <div id="bodymain">

            <h1><a href="">@item.Title</a></h1>



            <span style="float: left; font-style: italic; font-family: calibri; padding: 5px; color: darkgray;">@item.PublishedDate.ToString("dd/MMM/yyyy")</span>
            <span style="float: right; font-family: calibri; color: darkred; font-weight: bold; padding: 5px; font-size: 22px;">@string.Format("{0}{1}{2}", item.CurrencyCode, " ", item.price)</span>
            <span style="float: left; font-style: italic; font-family: calibri; padding: 5px; color: darkgrey;">@string.Format("{0}{1}{2}", item.CityName, " ,", item.CountryName)</span>

        </div>
        <div class="swiper-wrapper">

            @foreach(var media in item.mediaList)
            {
            <div class="swiper-slide">
                @if(!string.IsNullOrEmpty(media.Thumbnail ))
                {
                <div id="topstory">

                    <a>
                        <img src='@string.Format("{0}{1}", AkhbaarAlYawm.Application.Helper.ApplicationConstants.Akhbaar_PP_URL, media.Thumbnail)' id="image-width" alt="" style="height:250px;"/>
                    </a>
                </div>
                }
            </div>
            }


        </div>
        <br />
        @if(item.mediaList.Count > 0)
        {
        <div class="swiper-pagination" style="position: relative"></div>
        }
        <span style="float: left; font-family: calibri; padding: 5px; font-size: 20px;">Phone No.</span>
        <span style="float: right; font-family: calibri; color: darkred; font-weight: bold; padding: 5px; font-size: 22px;">@string.Format("{0}{1}{2}{3}", "+", item.PhoneCode, " ", item.PhoneNo)</span><br />
        <div id="body-section">
            @{
        
            
                <p class="body" id="@string.Format("{0}{1}", "content-less",item.ClassifiedID)">

                    @if(item.Description.Length  > 150)
                    {
                     string content = string.Format("{0}{1}", item.Description.Substring(0,150), "...");
                     @content   
                    <a onclick="readmore('@item.ClassifiedID')" style="font-family: Calibri; color: darkgray;">ReadMore</a>
                    }
                    else
                    {
                     @item.Description   
                    }
                    
                </p>
                
                <p class="body" id="@string.Format("{0}{1}", "content-more",item.ClassifiedID)" style="display: none;">

                    @item.Description

                </p>
            }
        </div>
        @*<div id="info-section" style="float: right;">
            <div id="people-comment-section" style="float: left; padding: 5px; margin-right: 20px; margin-bottom: 15px;">
                <span style="font-style: italic; font-weight: bold; font-family: Calibri; margin-left: 5px; color: darkgray; float: right;">
                    @{
        string commmentText;
        if (item.CommentCount > 1)
        {
            commmentText = string.Format("{0}{1}{2}", item.CommentCount," ", "comments");
        }
        else
        {
            commmentText = string.Format("{0}{1}{2}", item.CommentCount, " ", "comment");
        }
                    }
                    <a onclick="commentFunction('@item.ClassifiedID')" style="color:darkgray;">@commmentText</a>
                </span>
            </div>
        </div>*@
       @* <div id="people-like-section-@item.ClassifiedID" style="float: left; padding: 5px; margin-left: 20px; margin-bottom: 15px;">

            <span style="font-style:italic;font-family:Calibri;margin-left:5px; color:blue;font-weight:bold;">@item.userlikescount</span>

        </div>*@


       @* <div id="share-section" style="float: left;">
            <div id="like-section" style="float: left; padding: 5px; margin-left: 20px; margin-bottom: 15px;">
                
                <div style="display:none" id="HiddenUnlikeID-@item.ClassifiedID"><i class="fa fa-thumbs-o-up" aria-hidden="true" style="color: darkgray;" onclick="LikeFuntion('@item.UserID', '@item.ClassifiedID', true)"><span style="font-style: italic; font-family: Calibri; margin-left: 5px; color: darkgray; font-weight: bold;">Like</span></i></div>
                <div style="display:none" id="HiddenLikedID-@item.ClassifiedID"><i class="fa fa-thumbs-up"  aria-hidden="true" style="color:blue;" onclick="LikeFuntion('@item.UserID', '@item.ClassifiedID', false)"><span style="font-style:italic;font-family:Calibri;margin-left:5px; color:blue;font-weight:bold;">Like</span></i></div>
                @if(!item.UserLikedClassified)
                {
                <div><i class="fa fa-thumbs-o-up" id="UnlikeID-@item.ClassifiedID" aria-hidden="true" style="color: darkgray;" onclick="LikeFuntion('@item.UserID', '@item.ClassifiedID', true)"><span style="font-style: italic; font-family: Calibri; margin-left: 5px; color: darkgray; font-weight: bold;">Like</span></i></div>
                }else{
                <div><i class="fa fa-thumbs-up" id="LikedID-@item.ClassifiedID" aria-hidden="true" style="color:blue;" onclick="LikeFuntion('@item.UserID', '@item.ClassifiedID', false)"><span style="font-style:italic;font-family:Calibri;margin-left:5px; color:blue;font-weight:bold;">Like</span></i></div>
                }
                
            </div>

            <div id="comment-section" style="float: left; padding: 5px; margin-right: 20px; margin-bottom: 15px; margin-left: 147px;"><i class="fa fa-comment-o" aria-hidden="true" style="color: darkgray;"><span style="font-style: italic; font-weight: bold; font-family: Calibri; margin-left: 5px; color: darkgray;"><a onclick="commentFunction('@item.ClassifiedID')" style="color:darkgray;">comment</a></span></i></div>
        </div>
        *@
    </div>
       
    }
    

    
    <div id="commentView"></div>
    </div>
<div id="FilterClassifieds" style="display:none;">
       @{Html.RenderAction("GetFilterLayout", "Classifieds"); }
    @* @Html.Partial("~/Views/Classifieds/PartialFilterClassifieds.cshtml")*@
    </div>
    <!-- /content -->

    <script src="~/FeaturedPanel/dist/js/swiper.min.js"></script>
    <script>
        var swiper = new Swiper('.swiper-container', {
            pagination: '.swiper-pagination',
            paginationClickable: true
        });
    </script>

    
    <script type="text/javascript">


        $("#info").click(function () {
            if ($("#subnav").css('display') == 'block') {
                $("#header").css('height', '40px');
            } else {
                $("#header").css('height', '65px');
            }
        });
        $("#FilterClassifiedIcon").click(function () {
            if ($("#FilterClassifieds").css('display') == 'none') {
                $("#content").css('display', 'none');
                //$("#subnavConfig").css('margin-top', '-25px;');
                $("#FilterClassifieds").css('display', 'block');
            }
            else {
                $("#content").css('display', 'block');
                $("#FilterClassifieds").css('display', 'none');
            }

        });
        function commentFunction(val) {
            $.ajax({
                url: "/Classifieds/Comment",
                type: "GET",
                dataType: "html",
                data: { "classifiedID": val },
                success: function (data) {
                    $("#commentView").html(data);
                }
            });
        }
        function readmore(classifiedID) {
            $("#content-less" + classifiedID).css("display", 'none');
            $("#content-more" + classifiedID).css("display", 'block');
        }

        function LikeFuntion(userId, entityId, IsLike) {
            var entityCategoryID;
            if (window.location.href.indexOf("Classifieds") > -1) {
                entityCategoryID = 2;
            }
            $.ajax({
                url: "/Classifieds/TriggerLike",
                type: "GET",
                dataType: "html",
                data: { "userId": userId, "entityId": entityId, "entityCategoryID": entityCategoryID, "isLiked": IsLike },
                success: function (data) {
                    if (IsLike == true) {
                        $("#UnlikeID-" + entityId).css("display", "none");
                        $("#LikedID-" + entityId).css("display", "none");
                        $("#HiddenUnlikeID-" + entityId).css("display", "none");
                        $("#HiddenLikedID-" + entityId).css("display", "block");

                    } else {
                        $("#LikedID-" + entityId).css("display", "none");
                        $("#UnlikeID-" + entityId).css("display", "none");
                        $("#HiddenLikedID-" + entityId).css("display", "none");
                        $("#HiddenUnlikeID-" + entityId).css("display", "block");
                    }
                    var countstring = "";
                    countstring = data > 1 ? "persons like this" : "person like this";
                    if (data >= 1) {
                        $("#people-like-section-" + entityId + " " + "span").html(data + " " + countstring);
                    } else {
                        $("#people-like-section-" + entityId + " " + "span").html("");
                    }
                }


            });
        }


        $("#fixedbutton").click(function () {
            location.href = "/Classifieds/PostNow";
        });
    </script>
